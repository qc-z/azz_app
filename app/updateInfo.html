<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>修改资料</title>
        <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
        <link href="css/mui.min.css" rel="stylesheet" />
        <link href="css/mui.picker.min.css" rel="stylesheet" />
		<link href="css/mui.poppicker.css" rel="stylesheet" />
        <link rel="stylesheet" href="css/style.css" />
        <script src="js/zepto.min.js"></script>
        <script src="js/bbmis.js"></script>
        <script type="application/javascript"  src="js/hkJS.js"></script>
		<style>

		</style>
    </head>

    <body class="whiteBg">
		<div id="app" class="mui-views">
	　　　　<div class="mui-view">
	　　　　　　<div class="mui-pages"></div>
	　　　　</div>
	　　</div>

		<!-- 主页面 -->
		<div id="updateInfoCon" class="mui-page">
			<div class="mui-page-content">
				<div class="integrity">
	                <span class="">信息完整度</span>
	                <progress max="100" value="0" id="ratePro"></progress>
		            <span id="rate">0%</span>
	                <p>补全资料达到90%才能提高曝光率、解锁聊天功能哦</p>
	            </div>
	            <ul class="mui-table-view" id='promptBtn'>
	            	<li class="mui-table-view-cell info-title">基本信息<span style="color:#f00">(完善资料并审核通过可以提高曝光率)</span></li>
					<li class="mui-table-view-cell titleName" id="nickN">
						<a href="" class="mui-navigate-right">
							<span class="flag-title">昵称</span>

							<span class="mui-badge noBg" id="nickname"></span>
						</a>
					</li>
					<li class="mui-table-view-cell" id="age">
				        <a class="mui-navigate-right">
				        	年龄
				        	<span class="mui-badge noBg" id="ageResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id='showCityPicker3'>
				        <a class="mui-navigate-right">
				        	地区
				        	<span class="mui-badge noBg" id='cityResult3'></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell info-title">关于我</li>
				    <li class="mui-table-view-cell" id="lovePrice">
				        <a class="mui-navigate-right">
				        	宠爱指数&nbsp;<img src="img/list_love@2x.png" width="20">
				        	<span class="mui-badge noBg" id="lovePriceResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="loveDate">
				        <a class="mui-navigate-right">
				        	甜蜜目标&nbsp;<img src="img/list_target@2x.png" width="20">
				        	<span class="mui-badge noBg" id="loveDateResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="income">
				        <a class="mui-navigate-right">
				        	年收入
				        	<span class="mui-badge noBg" id="incomeResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="assets">
				        <a class="mui-navigate-right">
				        	总资产
				        	<span class="mui-badge noBg" id="assetsResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="sports">
				        <a href="#sportType" class="mui-navigate-right" style="min-height:60px">
				        	<span style="display:inline-block">运动&nbsp;<img src="img/list_exercise@2x.png" width="20"></span>
				        	<div class="mui-badge noBg" id="sportsResult"></div>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="tour">
				        <a href="#tourType" class="mui-navigate-right" style="min-height:60px">
				        	<span style="display:inline-block">旅游&nbsp;<img src="img/list_tourism@2x.png" width="20"></span>
				        	<div class="mui-badge noBg" id="tourResult"></div>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="mybody">
				        <a class="mui-navigate-right">
				        	体型
				        	<span class="mui-badge noBg" id="mybodyResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="myHeight">
				        <a class="mui-navigate-right">
				        	身高
				        	<span class="mui-badge noBg" id="myHeightResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="drink">
				        <a class="mui-navigate-right">
				        	饮酒习惯
				        	<span class="mui-badge noBg" id="drinkResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="smoking">
				        <a class="mui-navigate-right">
				        	抽烟习惯
				        	<span class="mui-badge noBg" id="smokingResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell" id="education">
				        <a class="mui-navigate-right">
				        	最高学历
				        	<span class="mui-badge noBg" id="educationResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell info-title">自我介绍</li>
				    <li class="mui-table-view-cell titleName" id="work">
				        <a class="mui-navigate-right">
				        	<div class="flag-title">职业描述</div>
				        	<!-- <span class="mui-badge-orange audit">审核中</span> -->
				        	<span class="mui-badge noBg word-normal" id="workResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell titleName" id="character">
				        <a class="mui-navigate-right">
				        	<div class="flag-title">个性签名</div>
				        	<!-- <span class="mui-badge-orange audit">审核中</span> -->
				        	<span class="mui-badge noBg word-normal" id="characterResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell titleName" id="selfInfo">
				        <a class="mui-navigate-right Mtext">
				        	<div class="flag-title">自我介绍</div>
				        	<!-- <span class="mui-badge-orange audit">审核中</span> -->
				        	<span class="mui-badge noBg word-normal" id="selfInfoResult"></span>
				        </a>
				    </li>
				    <li class="mui-table-view-cell titleName2" id="looking">
				        <a class="mui-navigate-right Mtext">
				        	<div class="flag-title2">我正在寻找</div>
				        	<!-- <span class="mui-badge-orange audit">审核中</span> -->
				        	<span class="mui-badge noBg word-normal" id="lookingReuslt"></span>
				        </a>
				    </li>
				</ul>
	        </div>
	    </div>
	    <!-- 运动 -->
		<div id="sportType" class="mui-page sportType">
			<div class="mui-page-content">
				<div class="mui-row">
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>游泳</label>
						<input name="checkbox1" value="游泳" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>跑步</label>
						<input name="checkbox1" value="跑步" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>健身</label>
						<input name="checkbox1" value="健身" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>瑜伽</label>
						<input name="checkbox1" value="瑜伽" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>高尔夫</label>
						<input name="checkbox1" value="高尔夫" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>赛车</label>
						<input name="checkbox1" value="赛车" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>帆船</label>
						<input name="checkbox1" value="帆船" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>滑浪风帆</label>
						<input name="checkbox1" value="滑浪风帆" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>冲浪</label>
						<input name="checkbox1" value="冲浪" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>独木舟</label>
						<input name="checkbox1" value="独木舟" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>马球</label>
						<input name="checkbox1" value="马球" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>马术</label>
						<input name="checkbox1" value="马术" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>滑雪</label>
						<input name="checkbox1" value="滑雪" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>打猎</label>
						<input name="checkbox1" value="打猎" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>射击</label>
						<input name="checkbox1" value="射击" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>登山</label>
						<input name="checkbox1" value="登山" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>射箭</label>
						<input name="checkbox1" value="射箭" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>潜水</label>
						<input name="checkbox1" value="潜水" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>网球</label>
						<input name="checkbox1" value="网球" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>羽毛球</label>
						<input name="checkbox1" value="羽毛球" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>篮球</label>
						<input name="checkbox1" value="篮球" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>斯诺克</label>
						<input name="checkbox1" value="斯诺克" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>保龄球</label>
						<input name="checkbox1" value="保龄球" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>足球</label>
						<input name="checkbox1" value="足球" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>电子游戏</label>
						<input name="checkbox1" value="电子游戏" type="checkbox" class="rds">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>棋牌</label>
						<input name="checkbox1" value="棋牌" type="checkbox" class="rds" class="rds">
					</div>
				</div>
				<div class="comfirmBtn">
					<button class="btn btn-primary" id="sportsBtn">确定</button>
				</div>
			</div>
		</div>

		<!-- 旅游 -->
		<div id="tourType" class="mui-page sportType">
			<div class="mui-page-content">
				<div class="mui-row">
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>阳光海滩</label>
						<input name="checkbox1" value="阳光海滩" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>自驾探险</label>
						<input name="checkbox1" value="自驾探险" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>人文历史</label>
						<input name="checkbox1" value="人文历史" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>都市购物</label>
						<input name="checkbox1" value="都市购物" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>极限运动</label>
						<input name="checkbox1" value="极限运动" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>豪华酒店</label>
						<input name="checkbox1" value="豪华酒店" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>产业探究</label>
						<input name="checkbox1" value="产业探究" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>滑浪风帆</label>
						<input name="checkbox1" value="滑浪风帆" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>派对交友</label>
						<input name="checkbox1" value="派对交友" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>私人庄园</label>
						<input name="checkbox1" value="私人庄园" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>地貌奇观</label>
						<input name="checkbox1" value="地貌奇观" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>高尔夫胜地</label>
						<input name="checkbox1" value="高尔夫胜地" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>足球联赛</label>
						<input name="checkbox1" value="足球联赛" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>篮球联赛</label>
						<input name="checkbox1" value="篮球联赛" type="checkbox" class="rdt">
					</div>
					<div class="mui-col-sm-6 mui-col-xs-6 mui-checkbox mui-left">
						<label>巡回演唱会</label>
						<input name="checkbox1" value="巡回演唱会" type="checkbox" class="rdt">
					</div>
				</div>
				<div class="comfirmBtn">
					<button class="btn btn-primary" id="tourBtn">确定</button>
				</div>
			</div>
		</div>
    </body>
<script src="js/mui.min.js"></script>
<script src="js/mui.view.js"></script>
<script src="js/mui.picker.min.js"></script>
<script src="js/mui.poppicker.js"></script>
<script src="js/city.data-3.js" type="text/javascript" charset="utf-8"></script>
<script src="js/zepto.min.js"></script>
<script>
	// 初始化顶部导航
	getInterface().initDataWithArray("#FFFFFF","back","修改资料","","","#333333","shaixuan","#333333");

	//修改资料前需先加载资料
	getInterface().post_action("getInfo",{},"get");

	//初始化单页view
	var viewApi = mui('#app').view({
		defaultPage: '#updateInfoCon'
	});
	var view = viewApi.view;
	view.addEventListener('pageBeforeShow', function(e) {
		document.getElementById('updateInfoCon').style.display = 'none';
		//	console.log(e.detail.page.id + ' show');
	});
	view.addEventListener('pageBack', function(e) {
		document.getElementById('updateInfoCon').style.display = 'block';
　　});

	(function($, doc) {
		$.init();
		$.ready(function() {
			var _getParam = function(obj, param) {
				return obj[param] || '';
			};
			//地区
			var cityPicker3 = new $.PopPicker({
				layer: 2
			});
			cityPicker3.setData(cityData3);
			var showCityPickerButton = doc.getElementById('showCityPicker3');
			var cityResult3 = doc.getElementById('cityResult3');
			showCityPickerButton.addEventListener('tap', function(event) {
				cityPicker3.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({addr: _getParam(items[0], 'text')+ "-" + _getParam(items[1], 'text')}),"post");
					cityResult3.innerText = _getParam(items[0], 'text') + "-" + _getParam(items[1], 'text');
					//返回 false 可以阻止选择框的关闭
					//return false;
				});
			}, false);
			//宠爱指数
			var lovePricePicker = new $.PopPicker();
			lovePricePicker.setData([{
				value: '1',
				text: '小清新'
			}, {
				value: '2',
				text: '浪漫'
			}, {
				value: '3',
				text: '轻奢'
			}, {
				value: '4',
				text: '高奢'
			}]);
			var showUserPickerButton = doc.getElementById('lovePrice');
			var lovePriceResult = doc.getElementById('lovePriceResult');
			showUserPickerButton.addEventListener('tap', function(event) {
				lovePricePicker.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({lovePrice:items[0].text}),"post");
					lovePriceResult.innerText = items[0].text;
				});
			}, false);
			//甜蜜目标
			var loveDatePicker = new $.PopPicker();
			loveDatePicker.setData([{
				value: '1',
				text: '初见'
			}, {
				value: '2',
				text: '短期'
			}, {
				value: '3',
				text: '中期'
			}, {
				value: '4',
				text: '长期'
			}, {
				value: '5',
				text: '密友'
			}, {
				value: '6',
				text: '结婚'
			}]);
			var showUserPickerButton = doc.getElementById('loveDate');
			var loveDateResult = doc.getElementById('loveDateResult');
			showUserPickerButton.addEventListener('tap', function(event) {
				loveDatePicker.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({loveDate: items[0].text}),"post");
					loveDateResult.innerText = items[0].text;
				});
			}, false);
			//年收入
			var incomePicker = new $.PopPicker();
			incomePicker.setData([{
				value: '1',
				text: '50万'
			}, {
				value: '2',
				text: '100万'
			}, {
				value: '3',
				text: '200万'
			}, {
				value: '4',
				text: '500万'
			}, {
				value: '5',
				text: '1000万'
			}, {
				value: '6',
				text: '5000万'
			}, {
				value: '7',
				text: '1亿以上'
			}]);
			var showUserPickerButton = doc.getElementById('income');
			var incomeResult = doc.getElementById('incomeResult');
			showUserPickerButton.addEventListener('tap', function(event) {
				incomePicker.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({income: items[0].text}),"post");
					incomeResult.innerText = items[0].text;
				});
			}, false);
			//总资产
			var assetsPicker = new $.PopPicker();
			assetsPicker.setData([{
				value: '1',
				text: '500万'
			}, {
				value: '2',
				text: '1000万'
			}, {
				value: '3',
				text: '2000万'
			}, {
				value: '4',
				text: '5000万'
			}, {
				value: '5',
				text: '1亿'
			}, {
				value: '6',
				text: '2亿'
			}, {
				value: '7',
				text: '5亿'
			}, {
				value: '8',
				text: '10亿以上'
			}]);
			var showUserPickerButton = doc.getElementById('assets');
			var assetsResult = doc.getElementById('assetsResult');
			showUserPickerButton.addEventListener('tap', function(event) {
				assetsPicker.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({assets: items[0].text}),"post");
					assetsResult.innerText = items[0].text;
				});
			}, false);
			//体型
			var mybodyPicker = new $.PopPicker();
			mybodyPicker.setData([{
				value: '1',
				text: '较瘦'
			}, {
				value: '2',
				text: '健美'
			}, {
				value: '3',
				text: '匀称'
			}, {
				value: '4',
				text: 'S型'
			}, {
				value: '5',
				text: '微胖'
			}, {
				value: '6',
				text: '偏胖'
			}, {
				value: '7',
				text: '其他'
			}]);
			var showUserPickerButton = doc.getElementById('mybody');
			var mybodyResult = doc.getElementById('mybodyResult');
			showUserPickerButton.addEventListener('tap', function(event) {
				mybodyPicker.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({body: items[0].text}),"post");
					mybodyResult.innerText = items[0].text;
				});
			}, false);
			//身高
			var myHeightPicker = new $.PopPicker();
			myHeightPicker.setData([{
				text: '137cm'
			}, {
				text: '140cm'
			}, {
				text: '143cm'
			}, {
				text: '146cm'
			}, {
				text: '149cm'
			}, {
				text: '152cm'
			}, {
				text: '155cm'
			}, {
				text: '158cm'
			}, {
				text: '161cm'
			}, {
				text: '164cm'
			}, {
				text: '167cm'
			}, {
				text: '170cm'
			}, {
				text: '173cm'
			}, {
				text: '176cm'
			}, {
				text: '179cm'
			}, {
				text: '182cm'
			}, {
				text: '185cm'
			}, {
				text: '188cm'
			}, {
				text: '191cm'
			}, {
				text: '194cm'
			}, {
				text: '194cm以上'
			}]);
			var showUserPickerButton = doc.getElementById('myHeight');
			var myHeightResult = doc.getElementById('myHeightResult');
			showUserPickerButton.addEventListener('tap', function(event) {
				myHeightPicker.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({height: items[0].text}),"post");
					myHeightResult.innerText = items[0].text;
				});
			}, false);
			//饮酒习惯
			var drinkPicker = new $.PopPicker();
			drinkPicker.setData([{
				text: '不喝酒'
			}, {
				text: '社交应酬'
			}, {
				text: '经常喝酒'
			}]);
			var drink = doc.getElementById('drink');
			var drinkResult = doc.getElementById('drinkResult');
			drink.addEventListener('tap', function(event) {
				drinkPicker.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({drink: items[0].text}),"post");
					drinkResult.innerText = items[0].text;
				});
			}, false);
			//抽烟习惯
			var smokingPicker = new $.PopPicker();
			smokingPicker.setData([{
				text: '不抽烟'
			}, {
				text: '偶尔抽烟'
			}, {
				text: '经常抽烟'
			}]);
			var smoking = doc.getElementById('smoking');
			var smokingResult = doc.getElementById('smokingResult');
			smoking.addEventListener('tap', function(event) {
				smokingPicker.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({smoking: items[0].text}),"post");
					smokingResult.innerText = items[0].text;
				});
			}, false);
			//最高学历
			var educationPicker = new $.PopPicker();
			educationPicker.setData([{
				text: '高中'
			}, {
				text: '专科'
			}, {
				text: '学士学位'
			}, {
				text: '硕士研究生'
			}, {
				text: '博士/博后'
			}]);
			var education = doc.getElementById('education');
			var educationResult = doc.getElementById('educationResult');
			education.addEventListener('tap', function(event) {
				educationPicker.show(function(items) {
					getInterface().post_action("editInfo",JSON.stringify({education: items[0].text}),"post");
					educationResult.innerText = items[0].text;
				});
			}, false);

			//年龄
			var agePicker = new $.DtPicker({
				type: "date",//设置日历初始视图模式    //真正的月份比写的多一个月。  type的类型你还是可以选择date, datetime month time  hour
                beginDate: new Date(1950, 0, 01),//设置开始日期
                endDate: new Date(1999, 11, 31),//设置结束日期
                labels: ['年', '月','日'],//设置默认标签区域提示语
			});
			var age = doc.getElementById('age');
			var ageResult = doc.getElementById('ageResult');
			agePicker.setSelectedValue("1999-01-01");
			age.addEventListener('tap', function(event) {
				agePicker.show(function(items) {

					var currentDate = new Date().getFullYear();
					var ageNum = currentDate-items.y.value;
					getInterface().post_action("editInfo",JSON.stringify({age: ageNum}),"post");
					ageResult.innerText = ageNum;
				});
			}, false);
		});
	})(mui, document);

	// 原生返回
	function leftBtnClick(){
		getInterface().leftBtnClick();
	}

	//运动
	$('#sports').on('tap',function(){
		getInterface().initDataWithArray("#FFFFFF","","选择运动","关闭","","#333333","","#333333");
	})
	var num=0;
	$('#sportType').on('tap', '.mui-checkbox', function() {
		console.log($(this)[0].children.checkbox1.checked)
		if($(this)[0].children.checkbox1.checked) {
			num--;
        }else{// false就是选中,true没选中
        	if(num>7){
	        	mui.toast('最多只能选择8项');
	        	$(this)[0].children.checkbox1.checked = true;
	        }else{
        		num++;
	        }
        }
    	console.log(num)
	});
	$('#sportsBtn').on('tap',function(){
		var res = getVals('rds');
		console.log(JSON.stringify(res[0]))
		getInterface().post_action("editInfo",JSON.stringify({sports:res}),"post");
		$('#sportsResult').html('');
		for(var i=0; i<res.length; i++){
			var con = res[i];
			$('#sportsResult').append('<span class="label label-primary">'+con+'</span>');
		}
		getInterface().initDataWithArray("#FFFFFF","back","修改资料","","","#333333","shaixuan","#333333");
		viewApi.back();	// 返回前一页
	})

	//旅游
	$('#tour').on('tap',function(){
		getInterface().initDataWithArray("#FFFFFF","","选择旅游","关闭","","#333333","","#333333");
	})
	var num1=0;
	$('#tourType').on('tap', '.mui-checkbox', function() {
		console.log($(this)[0].children.checkbox1.checked)
		if($(this)[0].children.checkbox1.checked) {
			num1--;
        }else{// false就是选中,true没选中
        	if(num1>7){
	        	mui.toast('最多只能选择8项');
	        	$(this)[0].children.checkbox1.checked = true;
	        }else{
        		num1++;
	        }
        }
    	console.log(num1)
	});
	$('#tourBtn').on('tap',function(){
		var res = getVals('rdt');
		console.log(res);
		getInterface().post_action("editInfo",JSON.stringify({tour:res}),"post");
		$('#tourResult').html('');
		for(var i=0; i<res.length; i++){
			var con = res[i];
			$('#tourResult').append('<span class="label label-warning">'+con+'</span>');
		}
		getInterface().initDataWithArray("#FFFFFF","back","修改资料","","","#333333","shaixuan","#333333");
		viewApi.back();	// 返回前一页
	})
	// 顶部关闭
	function rightBtnClick(){
		viewApi.back();	// 返回前一页
		getInterface().initDataWithArray("#FFFFFF","back","修改资料","","","#333333","shaixuan","#333333");
	}
	function getVals(className){
	    var res = getCheckBoxRes(className);
	    if(res.length < 1){
	        mui.toast('请选择');
	        return;
	    }else if(res.length > 8){
	    	mui.toast('最多只能选8项~');
	        return;
	    }
	    return res;
	}
	function getCheckBoxRes(className){
	    var rdsObj = document.getElementsByClassName(className);
	    var checkVal = new Array();
	    var k = 0;
	    for(i = 0; i < rdsObj.length; i++){
	        if(rdsObj[i].checked){
	            checkVal[k] = rdsObj[i].value;
	            k++;
	        }
	    }
	    return checkVal;
	}

	// 昵称、工作、介绍等
	$("#promptBtn").on('tap','.titleName',function(e) {
		e.detail.gesture.preventDefault(); //修复iOS 8.x平台存在的bug，使用plus.nativeUI.prompt会造成输入法闪一下又没了
		var btnArray = ['取消', '保存'];
		var titleName = $(this).find('.mui-navigate-right .flag-title').text();
		var that = $(this);
		if(that[0].id == "nickN" || that[0].id == "work" || that[0].id == "character"){
		    mins=2;
		    maxs=20;
		}else if(that[0].id == "selfInfo" || that[0].id == "looking"){
			mins=20;
		    maxs=200;
		}
		// 弹出输入框
		mui.confirm('<textarea id="dialog"></textarea><span class="over-hint">0</span>', titleName, null, function(e) {
		    var index = e.index;

		    if(index === 1) {
		    	var dialogCon = document.getElementById('dialog').value;
		        var count = document.getElementById('dialog').value.length;

		        if(count>maxs){
		       		getInterface().msg_alert("最多不能超过"+maxs);
		       		$(".mui-popup-button-bold").addClass('warning-btn');
		       		return false;
		        }else if(count<mins){
		       		getInterface().msg_alert("最少不能低于"+mins);
		       	    return false;
		        }else{
		       		// 满足条件
		       		that.find('.mui-badge').text(dialogCon);
		       		console.log(titleName)
		       		if(titleName == '昵称'){
		       			localStorage.setItem('infoSta',1);
		       			getInterface().post_action("editInfo",JSON.stringify({nickname:dialogCon}),"post");
		       			getInterface().notice_name(dialogCon);

		       		}else if(titleName == '职业描述'){
						getInterface().post_action("editInfo",JSON.stringify({work:dialogCon}),"post");
		       		}else if(titleName == '个性签名'){
						getInterface().post_action("editInfo",JSON.stringify({character:dialogCon}),"post");
		       		}else{
		       			getInterface().post_action("editInfo",JSON.stringify({selfInfo:dialogCon}),"post");
		       		}
		       		// that.find('.audit').show()
		       		if(that.find('.audit').length==0){
		       			that.find('.flag-title').after('<span class="mui-badge-orange audit">审核中</span>');
		       		}else{
		       			that.find('.audit').text('审核中');
		       			that.find('span').css({'color':'#333','font-weight':'normal'});
		       			that.find('.audit').css("color","#fff")
		       		}
		        }
		    }

		});
		letter('#dialog', mins, maxs);
	});
	// 我正在寻找
	$("#promptBtn").on('tap','.titleName2',function(e) {
		e.detail.gesture.preventDefault(); //修复iOS 8.x平台存在的bug，使用plus.nativeUI.prompt会造成输入法闪一下又没了
		var btnArray = ['取消', '保存'];
		var titleName = $(this).find('.mui-navigate-right .flag-title2').text();
		var that = $(this);
		mins=20;
	    maxs=200;
		// 弹出输入框
		mui.confirm('<textarea id="dialog" placeholder="我正在寻找长期伴侣"></textarea><span class="over-hint"></span>', titleName, null, function(e) {

		    var index = e.index;
		    if(index === 1) {
		    	var dialogCon = document.getElementById('dialog').value;
		       var count = document.getElementById('dialog').value.length;
		       if(count>maxs){
		       		getInterface().msg_alert("最多不能超过"+maxs);
		       		$(".mui-popup-button-bold").addClass('warning-btn');
		       		return false;
		       }else if(count<mins){
		       		getInterface().msg_alert("最少不能低于"+mins);
		       	    return false;
		       }else{
		       		// 满足条件
		       		that.find('.mui-badge').text(dialogCon);
		       		getInterface().post_action("editInfo",JSON.stringify({looking: dialogCon}),"post");

		       		if(that.find('.audit').length==0){
		       			that.find('.flag-title2').after('<span class="mui-badge-orange audit">审核中</span>');
		       		}else{
		       			that.find('.audit').text('审核中');
		       			that.find('span').css({'color':'#333','font-weight':'normal'});
		       			that.find('.audit').css("color","#fff")
		       		}
		       }
		    }
		});
		letter('#dialog', mins, maxs);
	});
	//判断不超过几个字
	function letter(input, min, max) {
		document.querySelector(input).onkeyup= function(){
			var length = $(this).val().length
			$('.over-hint').text(length);
			if(length >= min){
				$(".mui-popup-button-bold").removeClass('warning-btn');
				$('.over-hint').addClass('safe');
				if(length > max){
					$('.over-hint').removeClass('safe');
					$(".mui-popup-button-bold").addClass('warning-btn')
				}
			}else{
				$('.over-hint').removeClass('safe');
				$(".mui-popup-button-bold").addClass('warning-btn')
			}
		};
	}

	function return_action(data,data2){
		if( data2=='getInfo' ){
			// 得到用户信息
			var res = data.result;
			if( res.sex == '2' ){
				$('#assets').hide();
				$('#income').hide();
			}
			$('#nickname').text(res.nickname||'');
			$('#ratePro').attr('value',res.completion);
			$('#rate').text(res.completion+'%');
			$('#ageResult').text(res.age||'');
			$('#cityResult3').text(res.addr||'');
			$('#lovePriceResult').text(res.lovePrice||'');
			$('#loveDateResult').text(res.loveDate||'');
			$('#incomeResult').text(res.income||'');
			$('#assetsResult').text(res.assets||'');
			if(res.sports){
				for(var i=0; i<res.sports.length; i++){
					var con = res.sports[i];
					$('#sportsResult').append('<span class="label label-primary">'+con+'</span>');
				}
			}
			if(res.tour){
				for(var i=0; i<res.tour.length; i++){
					var con = res.tour[i];
					$('#tourResult').append('<span class="label label-warning">'+con+'</span>');
				}
			}
			$('#mybodyResult').text(res.body||'');
			$('#myHeightResult').text(res.height||'');
			$('#drinkResult').text(res.drink||'');
			$('#smokingResult').text(res.smoking||'');
			$('#educationResult').text(res.education||'')
			$('#workResult').text(res.work||'');
			$('#characterResult').text(res.character||'');
			$('#selfInfoResult').text(res.selfInfo||'');
			$('#lookingReuslt').text(res.looking||'');
			// 完整度
			if(data.result.completion >= 90){
				$('.integrity').css('display','none');
			}else{
				$('.integrity').css('display','block');
			}

			if(res.nickname && res.auditStatus == 'ing'){
				$('#nickN ').find('.flag-title').after('<span class="mui-badge-orange audit">审核中</span>')
			}
			if(res.work && res.auditStatus == 'ing'){
				$('#work ').find('.flag-title').after('<span class="mui-badge-orange audit">审核中</span>')
			}

			if(res.character && res.auditStatus == 'ing'){
				$('#character ').find('.flag-title').after('<span class="mui-badge-orange audit">审核中</span>')
			}
			if(res.selfInfo && res.auditStatus == 'ing'){
				$('#selfInfo').find('.flag-title').after('<span class="mui-badge-orange audit">审核中</span>')
			}
			if(res.looking && res.auditStatus == 'ing'){
				$('#looking').find('.flag-title2').after('<span class="mui-badge-orange audit">审核中</span>')
			}
			// 判断是否审核通过
			if(res.auditContent.nickname && res.auditContent.nickname == '2'){
				$('#nickN .audit').text('审核中');
			}else if(res.auditContent.nickname && res.auditContent.nickname == '0'){
				$('#nickN .audit').text('不通过')
			}else if(res.auditContent.nickname && res.auditContent.nickname == '1'){
				$('#nickN .audit').text('审核通过')
			}
			if(res.auditContent.work && res.auditContent.work == '2'){
				$('#work .audit').text('审核中');
			}else if(res.auditContent.work && res.auditContent.work == '0'){
				$('#work .audit').text('不通过')
			}else if(res.auditContent.work && res.auditContent.work == '1'){
				$('#work .audit').text('审核通过')
			}
			if(res.auditContent.character && res.auditContent.character == '2'){
				$('#character .audit').text('审核中');
			}else if(res.auditContent.character && res.auditContent.character == '0'){
				$('#character .audit').text('不通过')
			}else if(res.auditContent.character && res.auditContent.character == '1'){
				$('#character .audit').text('审核通过')
			}
			if(res.auditContent.selfInfo && res.auditContent.selfInfo == '2'){
				$('#selfInfo .audit').text('审核中');
			}else if(res.auditContent.selfInfo && res.auditContent.selfInfo == '0'){
				$('#selfInfo .audit').text('不通过')
			}else if(res.auditContent.selfInfo && res.auditContent.selfInfo == '1'){
				$('#selfInfo .audit').text('审核通过')
			}
			if(res.auditContent.looking && res.auditContent.looking == '2'){
				$('#looking .audit').text('审核中');
			}else if(res.auditContent.looking && res.auditContent.looking == '0'){
				$('#looking .audit').text('不通过')
			}else if(res.auditContent.looking && res.auditContent.looking == '1'){
				$('#looking .audit').text('审核通过')
			}
		}else{
			if(data.ret == 1){
				localStorage.setItem('completion',data.completion);
			}
			localStorage.setItem('completion',data.completion);
			$('#ratePro').attr('value',data.completion);
			$('#rate').text(data.completion+'%');
		}
	}

</script>
</html>
